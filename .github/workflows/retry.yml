name: Retry Failed Workflow

on:
  workflow_run:
    workflows: ["Script"]
    types:
      - completed
env:
  GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
jobs:
  retry:
    runs-on: ubuntu-latest

    steps:
      - name: Check if the workflow failed
        id: check-failure
        run: |
            if [ "${{ github.event.workflow_run.conclusion }}" == "failure" ]; then
            echo "Retrying workflow..."
            gh workflow run "Script"
